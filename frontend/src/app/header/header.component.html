<div class="header-container" [class.ready]="isUserConnected()">
  @if (isUserConnected()) {
  <ul class="urls indie-flower-regular">
    @for (item of links; track item.icon) {
    <li [class.image-loaded]="imagesLoaded()[item.icon]">
      <a [routerLink]="item.path">
        <img
          [src]="item.icon"
          [alt]="item.title"
          (load)="onImageLoad(item.icon)"
          class="link-icon"
        />
        <span class="link-text">{{ item.title }}</span>
      </a>
    </li>
    }

    <li class="settings-link">
      <button (click)="openSettingsModal()" class="settings-btn indie-flower-regular">
        <span class="settings-icon">âš™</span>
        <span class="link-text">Settings</span>
      </button>
    </li>
  </ul>
  } @else {
  <ul class="urls skeleton">
    @for (item of links; track item.icon) {
    <li>
      <a>
        <div class="skeleton-icon"></div>
        <span class="skeleton-text"></span>
      </a>
    </li>
    }
  </ul>
  }
</div>

<!-- Settings modal -->
@if (showSettingsModal()) {
<div class="modal-overlay" (click)="closeSettingsModal()">
  <div class="modal-paper indie-flower-regular" (click)="$event.stopPropagation()">
    <h2>Settings</h2>

    <form [formGroup]="settingsForm" (ngSubmit)="saveSettings()">
      <div class="form-group">
        <label for="nickname">Nickname</label>
        <input
          id="nickname"
          formControlName="nickname"
          type="text"
          placeholder="Enter your nickname"
          class="indie-flower-regular"
          autofocus
        />
      </div>

      <div class="modal-buttons">
        <button
          type="button"
          class="cancel-btn indie-flower-regular"
          (click)="closeSettingsModal()"
        >
          Cancel
        </button>

        <button
          type="submit"
          class="save-btn indie-flower-regular"
          [disabled]="settingsForm.get('nickname')?.hasError('required')"
        >
          Save
        </button>
      </div>
    </form>
  </div>
</div>
}
